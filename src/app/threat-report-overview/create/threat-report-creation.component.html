<div class="container" id="threatReportCreationComponent">
    <div class="row mt-10">
        <h2 class="col-md-12">
            New Product
        </h2>
    </div>
    <div class="row">
        <div class="col-md-12">
            <md-form-field>
                <input mdInput #filter [(ngModel)]="threatReport.name" placeholder="Workproduct Name" color="primary">
            </md-form-field>
        </div>
    </div>
    <div class="row mt-10">
        <div class="col-xs-12 flex flexItemsCenter">
            <span class="flex flexItemsCenter">
                <span>Boundries&nbsp;</span>
                <span class="slideWrapper">
                    <md-slide-toggle color="primary" (change)="boundriesToggled($event)" [checked]="showCheckBoxes"></md-slide-toggle>
                </span>
            </span>
        </div>
    </div>
    <div class="row mt-10" id="formWrapper" *ngIf="showCheckBoxes">
        <div class="col-xs-12">
            <md-select placeholder="Intrusion Set" color="primary" floatPlaceholder="always" (change)="addChip($event.source.selected.viewValue, 'intrusion-set')">
                <md-option *ngFor="let intrusion of intrusions" [value]="intrusion.value">
                    {{ intrusion.displayValue }}
                </md-option>
            </md-select>
            <div class="mt-18 mb-10">
                <md-chip-list class="mat-chip-list-stacked" selectable="true">
                    <md-chip *ngFor="let selectedIntrusion of threatReport.boundries.intrusions" removable="true" selectable="true">
                        <div class="flex">
                            <span class="flex1 flexNowrap">{{ selectedIntrusion }}</span>
                            <md-icon mdChipRemove (click)="removeChip(selectedIntrusion, 'intrusion-set')">cancel</md-icon>
                        </div>
                    </md-chip>
                </md-chip-list>
            </div>
        </div>
        <div class="col-xs-12">
            <md-form-field floatPlaceholder="always">
                <input #startDateInput mdInput [(ngModel)]="threatReport.boundries.startDate" [max]="maxStartDate" (dateChange)="startDateChanged(startDateInput.value)" [(ngModel)]="startDate"
                    [mdDatepicker]="startDatePicker" placeholder="Start Date" color="primary" floatPlaceholder="always" />
                <md-datepicker-toggle mdSuffix [for]="startDatePicker"></md-datepicker-toggle>
                <md-datepicker #startDatePicker></md-datepicker>
            </md-form-field>
            <small *ngIf="dateError.startDate.isError" style="color:red;">{{ dateError.errorMessage }}</small>
        </div>
        <div class="col-xs-12">
            <md-form-field floatPlaceholder="always">
                <input #endDateInput mdInput  [(ngModel)]="threatReport.boundries.endDate" [min]="minEndDate" (dateChange)="endDateChanged(endDateInput.value)"
                 [mdDatepicker]="endDatePicker" placeholder="End Date" color="primary" floatPlaceholder="always">
                <md-datepicker-toggle mdSuffix [for]="endDatePicker"></md-datepicker-toggle>
                <md-datepicker #endDatePicker></md-datepicker>
            </md-form-field>
            <small *ngIf="dateError.endDate.isError" style="color:red;">{{ dateError.errorMessage }}</small>
            <small *ngIf="dateError.endDate.isSameOrBefore" style="color:red;">{{ dateError.endDate.isSameOrBeforeMessage }}</small>
        </div>
        <div class="col-xs-12">
            <md-form-field floatPlaceholder="always">
                <input mdInput #targetSelected placeholder="Target" color="primary" floatPlaceholder="always" (keyup.enter)="addChip(targetSelected.value, 'target')">
            </md-form-field>
            <md-chip-list class="mat-chip-list-stacked" selectable="true">
                <md-chip *ngFor="let target of threatReport.boundries.targets" removable="true">
                    <div class="flex">
                        <span class="flex1 flexNowrap">{{ target }}</span>
                        <md-icon mdChipRemove (click)="removeChip(target, 'target')">cancel</md-icon>
                    </div>
                </md-chip>
            </md-chip-list>
        </div>
        <div class="col-xs-12">
            <md-select #malwareSelected placeholder="Malware" color="primary" floatPlaceholder="always" (change)="addChip($event.source.selected.viewValue, 'malware')">
                <md-option *ngFor="let curMalware of malware" [value]="curMalware.value">
                    {{ curMalware.displayValue }}
                </md-option>
            </md-select>
            <div class="mt-18 mb-10">
                <md-chip-list class="mat-chip-list-stacked" selectable="true">
                    <md-chip  *ngFor="let malware of threatReport.boundries.malware" removable="true">
                        <div class="flex">
                            <span class="flex1 flexNowrap">{{ malware }}</span>
                            <md-icon mdChipRemove (click)="removeChip(malware, 'malware')">cancel</md-icon>
                        </div>
                    </md-chip>
                </md-chip-list>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12 col-xs-12 mt-10">
            <file-upload #fileUpload (fileParsedEvent)="fileParsed($event)"></file-upload>
        </div>
    </div>
    <div class="row pull-right">
        <div class="col-md-12 col-xs-12 pull-right mt-10">
                <button color="primary" md-button (click)="cancel($event)">CANCEL</button>
                <button [disabled]="dateError.startDate.isError || dateError.endDate.isError || dateError.endDate.isSameOrBefore"  
                    color="primary" md-raised-button (click)="save($event)">
                    CONTINUE
                </button>
        </div>
    </div>

</div>